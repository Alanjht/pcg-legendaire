<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Énigme 3 - PCG</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 40px;
      background-color: #1c1c1c;
      color: #f1c40f;
    }

    h1, h2 {
      color: #f39c12;
    }

    p {
      line-height: 1.6;
    }

    input[type="text"] {
      padding: 10px;
      margin: 8px 0 20px 0;
      width: 100%;
      box-sizing: border-box;
      border: 2px solid #f1c40f;
      border-radius: 5px;
      background-color: #333;
      color: #fff;
    }

    input[type="text"]::placeholder {
      color: #bbb;
    }

    button {
      padding: 12px 25px;
      background-color: #f39c12;
      color: #1c1c1c;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #e67e22;
    }

    #successMessage {
      color: #2ecc71;
      font-weight: bold;
      display: none;
      margin-top: 20px;
    }

    #errorMessage {
      color: #e74c3c;
      font-weight: bold;
      display: none;
      margin-top: 20px;
    }

    #nextLink {
      display: none;
      margin-top: 20px;
      background-color: #27ae60;
      color: white;
      padding: 10px 15px;
      text-decoration: none;
      border-radius: 5px;
    }

    #nextLink:hover {
      background-color: #219150;
    }

    img {
      max-width: 100%;
      height: auto;
      margin: 20px 0;
      border: 2px solid #f1c40f;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <h1>Énigme 3 - PCG</h1>

  <p>
    Félicitations, tu as une nouvelle fois démontré que tu avais les épaules pour prétendre au PCG,
    mais le chemin est encore long avant de pouvoir espérer mettre la main sur cet outil légendaire !
    Tu devras donc à nouveau résoudre une énigme qui mettra tes compétences d'analyse, d'anglais et,
    comme toujours, de comptabilité à rude épreuve.
  </p>

  <h2>Partie 1 : Trouve le mot de passe</h2>
  <p>Le rébus se trouve en salle BECOD :</p>
  <input type="text" id="salleBecod" placeholder="Votre réponse ici" />

  <h2>Partie 2 : Rébus</h2>
  <p>Résous le rébus ci-dessous (réponse attendue en anglais) :</p>
  <img src="gorge.png" alt="Rébus 2 : gorge" />
  <input type="text" id="rebus2" placeholder="Votre réponse ici" />

  <h2>Partie 3 : Texte à trous</h2>
  <p>Complétez le texte avec les mots manquants :</p>
  <p>
    Le PCG constitue une <input type="text" id="q2" placeholder="Réponse" /> commune qui détermine la <input type="text" id="q3" placeholder="Réponse" /> des biens,
    définit les charges <input type="text" id="q4" placeholder="Réponse" />, et impose la présentation des <input type="text" id="q5" placeholder="Réponse" /> de l'entreprise.
    Le PCG est mis à jour d’environ <input type="text" id="q6" placeholder="Réponse" /> par an, et son application est <input type="text" id="q7" placeholder="Réponse" />.
    Le bilan se compose de l'actif et du <input type="text" id="q8" placeholder="Réponse" />. Le compte de <input type="text" id="q9" placeholder="Réponse" /> présente l'ensemble des charges et des <input type="text" id="q10" placeholder="Réponse" />.
  </p>

  <button onclick="verifierEnigme()">Vérifier mes réponses</button>

  <p id="successMessage">Bravo ! Toutes les réponses sont correctes.</p>
  <p id="errorMessage">Dommage, certaines réponses sont incorrectes ou incomplètes. Réessaie !</p>
  <a id="nextLink" href="enigme4.html">Passer à l'énigme suivante</a>

  <script>
    function verifierEnigme() {
      // Vérification de la salle BECOD
      const salleBecod = document.getElementById('salleBecod').value.trim().toUpperCase();
      const salleBecodOk = salleBecod === "BITCOIN";

      // Vérification du rébus (en prenant en compte l'apostrophe)
      const reponseRebus2 = document.getElementById('rebus2').value.trim().toUpperCase();
      const correctRebus2 = "TO HAVE A FROG IN ONE'S THROAT";
      const reponseRebus2SansApostrophe = reponseRebus2.replace(/'/g, "");
      const correctRebus2SansApostrophe = correctRebus2.replace(/'/g, "");
      const rebusOk = reponseRebus2SansApostrophe === correctRebus2SansApostrophe;

      // Vérification du texte à trous
      const bonnesReponses = {
        q2: 'référence',
        q3: 'valeur',
        q4: "d'exploitation",
        q5: 'ressources',
        q6: '20%',
        q7: 'obligatoire',
        q8: 'passif',
        q9: 'résultat',
        q10: 'produit'
      };

      let texteOk = true;
      for (let question in bonnesReponses) {
        const reponse = document.getElementById(question).value.trim().toLowerCase();
        if (reponse !== bonnesReponses[question]) {
          texteOk = false;
          break;
        }
      }

      if (salleBecodOk && rebusOk && texteOk) {
        document.getElementById('successMessage').style.display = 'block';
        document.getElementById('errorMessage').style.display = 'none';
        document.getElementById('nextLink').style.display = 'inline-block';
        localStorage.setItem('enigme3_reussie', 'true');
      } else {
        document.getElementById('errorMessage').style.display = 'block';
        document.getElementById('successMessage').style.display = 'none';
        document.getElementById('nextLink').style.display = 'none';
      }
    }

    // Protection si l'énigme précédente n'a pas été résolue
    if (!localStorage.getItem('enigme2_reussie')) {
      window.location.href = 'index.html';
    }
  </script>
</body>
</html>
