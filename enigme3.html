<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Énigme 3</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f4f4f9;
        }
        .hidden {
            display: none;
        }
        .enigme-part {
            margin-bottom: 30px;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        button {
            padding: 10px 20px;
            border: none;
            background-color: #4CAF50;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }
        button:hover {
            background-color: #45a049;
        }
        img {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>

<h1>Énigme 3</h1>

<div class="enigme-part">
    <h2>Partie 1 : Indices</h2>
    <p><strong>Question :</strong> La réponse se situe dans la salle du petit déjeuner. Attention à ce qui saute aux yeux !</p>
    <input type="text" id="questionInput" placeholder="Votre réponse en MAJUSCULES et en anglais">
    <br><br>
    <p><strong>Rébus :</strong></p>
    <img src="gorge.png" alt="Rébus">
    <br>
    <input type="text" id="rebusInput" placeholder="Réponse en anglais en MAJUSCULES">
</div>

<div class="enigme-part">
    <h2>Partie 2 : Texte à trous</h2>
    <p>Complète le texte avec les bonnes réponses :</p>

    <p>Le plan comptable est un outil de 
        <select id="q1">
            <option value="">--Choix--</option>
            <option value="référence">référence</option>
            <option value="gestion">gestion</option>
            <option value="contrôle">contrôle</option>
        </select>.
    </p>

    <p>Les amortissements concernent la perte de 
        <select id="q2">
            <option value="">--Choix--</option>
            <option value="valeur">valeur</option>
            <option value="durée">durée</option>
            <option value="quantité">quantité</option>
        </select> des biens.
    </p>

    <p>Les charges sont des dépenses 
        <select id="q3">
            <option value="">--Choix--</option>
            <option value="d'exploitation">d'exploitation</option>
            <option value="financières">financières</option>
            <option value="exceptionnelles">exceptionnelles</option>
        </select> pour faire fonctionner l'association.
    </p>

    <p>Les produits correspondent aux 
        <select id="q4">
            <option value="">--Choix--</option>
            <option value="ressources">ressources</option>
            <option value="dépenses">dépenses</option>
            <option value="dettes">dettes</option>
        </select> de l'association.
    </p>

    <p>La TVA normale est actuellement de 
        <select id="q5">
            <option value="">--Choix--</option>
            <option value="20%">20%</option>
            <option value="5,5%">5,5%</option>
            <option value="10%">10%</option>
        </select> en France.
    </p>

    <p>La tenue de la comptabilité est 
        <select id="q6">
            <option value="">--Choix--</option>
            <option value="obligatoire">obligatoire</option>
            <option value="facultative">facultative</option>
            <option value="interdite">interdite</option>
        </select> pour une association qui reçoit des subventions publiques.
    </p>

    <p>Un bilan comptable est constitué de l'actif et du 
        <select id="q7">
            <option value="">--Choix--</option>
            <option value="passif">passif</option>
            <option value="produit">produit</option>
            <option value="résultat">résultat</option>
        </select>.
    </p>

    <p>La différence entre les produits et les charges constitue le 
        <select id="q8">
            <option value="">--Choix--</option>
            <option value="résultat">résultat</option>
            <option value="passif">passif</option>
            <option value="budget">budget</option>
        </select>.
    </p>

    <p>Une subvention est considérée comme un 
        <select id="q9">
            <option value="">--Choix--</option>
            <option value="produit">produit</option>
            <option value="charge">charge</option>
            <option value="passif">passif</option>
        </select> dans les comptes.
    </p>
</div>

<button id="nextButton" class="hidden" onclick="window.location.href='enigme4.html'">Passer à l'énigme suivante</button>

<script>
    // Sécurité : vérifier si énigme 2 est réussie
    if (localStorage.getItem('enigme2') !== 'success') {
        alert('Vous devez réussir l\'énigme 2 avant d\'accéder à celle-ci.');
        window.location.href = 'enigme2.html';
    }

    const correctAnswers = {
        question: "BITCOIN",
        rebus: "TO HAVE A FROG IN ONE'S THROAT",
        texteATrou: [
            "référence",
            "valeur",
            "d'exploitation",
            "ressources",
            "20%",
            "obligatoire",
            "passif",
            "résultat",
            "produit"
        ]
    };

    function checkPart1() {
        const questionInput = document.getElementById('questionInput').value.trim().toUpperCase();
        const rebusInput = document.getElementById('rebusInput').value.trim().toUpperCase().replace(/\u2019/g, "'");

        return questionInput === correctAnswers.question &&
            rebusInput === correctAnswers.rebus;
    }

    function checkPart2() {
        const answers = correctAnswers.texteATrou;
        for (let i = 0; i < answers.length; i++) {
            const select = document.getElementById('q' + (i + 1));
            if (select.value !== answers[i]) {
                return false;
            }
        }
        return true;
    }

    function checkAll() {
        if (checkPart1() && checkPart2()) {
            document.getElementById('nextButton').classList.remove('hidden');
            localStorage.setItem('enigme3', 'success');
        }
    }

    // Écouteurs d'événements
    document.getElementById('questionInput').addEventListener('input', checkAll);
    document.getElementById('rebusInput').addEventListener('input', checkAll);

    for (let i = 1; i <= correctAnswers.texteATrou.length; i++) {
        document.getElementById('q' + i).addEventListener('change', checkAll);
    }
</script>

</body>
</html>
