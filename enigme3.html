<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Énigme 3 - PCG</title>
  <style>
    body {
      background-color: #1a1a1d;
      color: #c5c6c7;
      font-family: 'Trebuchet MS', sans-serif;
      margin: 40px;
    }
    h1, h2 {
      color: #66fcf1;
    }
    p {
      line-height: 1.6;
    }
    input[type="text"], select {
      padding: 8px;
      margin: 5px 0 15px 0;
      width: 100%;
      box-sizing: border-box;
      border: 1px solid #45a29e;
      background-color: #0b0c10;
      color: #66fcf1;
    }
    button {
      padding: 10px 20px;
      background-color: #45a29e;
      color: white;
      border: none;
      cursor: pointer;
      margin-top: 10px;
    }
    button:hover {
      background-color: #66fcf1;
      color: #1f2833;
    }
    #successMessage {
      color: #66fcf1;
      font-weight: bold;
      display: none;
      margin-top: 15px;
    }
    #errorMessage {
      color: #ff4c4c;
      font-weight: bold;
      display: none;
      margin-top: 15px;
    }
    #nextLink {
      display: none;
      margin-top: 20px;
      background-color: #45a29e;
      color: white;
      padding: 10px 15px;
      text-decoration: none;
      border-radius: 4px;
      display: inline-block;
    }
  </style>
</head>
<body>
  <h1>Énigme 3 - PCG</h1>

  <p>
    Félicitations, tu as une nouvelle fois démontré que tu avais les épaules pour prétendre au PCG,
    mais le chemin est encore long avant de pouvoir espérer mettre la main sur cet outil légendaire !
    Tu devras donc à nouveau résoudre une énigme qui mettra tes compétences d'analyse, d'anglais et,
    comme toujours, de comptabilité à rude épreuve.
  </p>

  <h2>Partie 1 : Trouve le mot de passe</h2>
  <p>La solution dans la salle du déjeuner. Attention à ce qui saute aux yeux !</p>
  <input type="text" id="salleBecod" placeholder="Votre réponse ici" />

  <h2>Partie 2 : Rébus</h2>
  <p>Résous le rébus ci-dessous (réponse attendue en anglais) :</p>
  <img src="gorge.png" alt="Rébus 2" style="max-width: 100%; height: auto;" />
  <input type="text" id="rebus2" placeholder="Votre réponse ici" />

  <h2>Partie 3 : Texte à trous</h2>
  <p>Complétez le texte avec les mots manquants :</p>
  <p><em>(Phrase à trous)</em></p>
  <p>
    Le PCG constitue une
    <select id="q2">
      <option value="">Choisissez...</option>
      <option value="référence">référence</option>
      <option value="méthode">méthode</option>
      <option value="ressource">ressource</option>
    </select>
    commune qui détermine la
    <select id="q3">
      <option value="">Choisissez...</option>
      <option value="valeur">valeur</option>
      <option value="couleur">couleur</option>
      <option value="quantité">quantité</option>
    </select>
    des biens, définit les charges
    <select id="q4">
      <option value="">Choisissez...</option>
      <option value="d'exploitation">d'exploitation</option>
      <option value="financières">financières</option>
      <option value="variables">variables</option>
    </select>,
    et impose la présentation des
    <select id="q5">
      <option value="">Choisissez...</option>
      <option value="ressources">ressources</option>
      <option value="factures">factures</option>
      <option value="données">données</option>
    </select>
    de l'entreprise. Le PCG est mis à jour d’environ
    <select id="q6">
      <option value="">Choisissez...</option>
      <option value="20%">20%</option>
      <option value="5%">5%</option>
      <option value="50%">50%</option>
    </select>
    par an, et son application est
    <select id="q7">
      <option value="">Choisissez...</option>
      <option value="obligatoire">obligatoire</option>
      <option value="facultative">facultative</option>
      <option value="interdite">interdite</option>
    </select>.
    Le bilan se compose de l'actif et du
    <select id="q8">
      <option value="">Choisissez...</option>
      <option value="passif">passif</option>
      <option value="flux">flux</option>
      <option value="résultat">résultat</option>
    </select>.
    Le compte de
    <select id="q9">
      <option value="">Choisissez...</option>
      <option value="résultat">résultat</option>
      <option value="passif">passif</option>
      <option value="bilan">bilan</option>
    </select>
    présente l'ensemble des charges et des
    <select id="q10">
      <option value="">Choisissez...</option>
      <option value="produit">produit</option>
      <option value="flux">flux</option>
      <option value="ressources">ressources</option>
    </select>.
  </p>

  <button onclick="verifierEnigme()">Vérifier mes réponses</button>

  <p id="successMessage">Bravo ! Toutes les réponses sont correctes.</p>
  <p id="errorMessage">Dommage, certaines réponses sont incorrectes ou incomplètes. Réessaie !</p>
  <a id="nextLink" href="enigme4.html">Passer à l'énigme suivante</a>

  <script>
    function verifierEnigme() {
      // Vérification Partie 1
      const salleBecod = document.getElementById('salleBecod').value.trim().toUpperCase();
      const salleBecodOk = salleBecod === "BITCOIN";

      // Vérification Partie 2
      const reponseRebus2 = document.getElementById('rebus2').value.trim().toUpperCase();
      const correctRebus2 = "TO HAVE A FROG IN ONE'S THROAT";
      const reponseRebus2SansApostrophe = reponseRebus2.replace(/'/g, "");
      const correctRebus2SansApostrophe = correctRebus2.replace(/'/g, "");
      const rebusOk = reponseRebus2SansApostrophe === correctRebus2SansApostrophe;

      // Vérification Partie 3
      const bonnesReponses = {
        q2: 'référence',
        q3: 'valeur',
        q4: "d'exploitation",
        q5: 'ressources',
        q6: '20%',
        q7: 'obligatoire',
        q8: 'passif',
        q9: 'résultat',
        q10: 'produit'
      };

      let texteOk = true;
      for (let question in bonnesReponses) {
        const reponse = document.getElementById(question).value;
        if (reponse !== bonnesReponses[question]) {
          texteOk = false;
          break;
        }
      }

      if (salleBecodOk && rebusOk && texteOk) {
        document.getElementById('successMessage').style.display = 'block';
        document.getElementById('errorMessage').style.display = 'none';
        document.getElementById('nextLink').style.display = 'inline-block';
        localStorage.setItem('enigme3_reussie', 'true');
      } else {
        document.getElementById('errorMessage').style.display = 'block';
        document.getElementById('successMessage').style.display = 'none';
        document.getElementById('nextLink').style.display = 'none';
      }
    }

    // Protection si l'énigme précédente n'a pas été résolue
    if (!localStorage.getItem('enigme2_reussie')) {
      window.location.href = 'index.html';
    }
  </script>
</body>
</html>
